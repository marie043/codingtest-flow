<!DOCTYPE html>
<html lang="en">
<head>
    <title>Demo Page by Sieun Kim</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        #custom-extensions {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            margin-top: 2%;
            margin-bottom: 2%;
        }
        .extension-block {
            width: 3%;
        }
    </style>
</head>
<body>

<div class="p-5 bg-primary text-white text-center">
    <h1>Demo Page by Sieun Kim</h1>
    <p>서버 개발자 과제 - 파일 확장자 차단</p>
</div>

<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
    <div class="container-fluid">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="#">과제</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Who is Sieun Kim?</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Skills</a>
            </li>
        </ul>
    </div>
</nav>

<div class="container mt-5">
    <div class="row">
        <div class="col-sm-4">
            <h2>Who is Sieun Kim?</h2>
            <div class="card">
                <h5 class="card-header">Photo of me:</h5>
                <div class="container"><img src="./img/sieun_kim.jpg" class="card-img"/></div>
                <div class="card-body">
                    <p>건국 대학교 소프트웨어학과 졸업</p>
                    <p>SSAFY Java 전공 트랙 이수</p>
                    <p>신입 백엔드 개발자</p>
                </div>
            </div>
            <h3 class="mt-4">Some Links</h3>
            <p>저에 대하여 더 알고 싶으시다면 다음의 링크를 방문해 주세요:)</p>
            <ul class="nav nav-pills flex-column">
                <li class="nav-item">
                    <a class="nav-link active" href="https://olivine-string-e0a.notion.site/44760ff5b10b4bb7a66399ad1143c337?pvs=4">노션 포트폴리오</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/marie043">깃허브</a>
                </li>
            </ul>
            <hr class="d-sm-none">
        </div>
        <div class="col-sm-8">
            <h2>과제</h2>
            <h5>제출일: 2024.05.12 (일)</h5>
            <div>
                <div class="form-check">
                    <input type="checkbox" name="extension" id="bat" class="form-check-input" value="bat"/><label for="bat" class="form-check-label">bat</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" name="extension" id="cmd" class="form-check-input" value="cmd"/><label for="cmd" class="form-check-label">cmd</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" name="extension" id="com" class="form-check-input" value="com"/><label for="com" class="form-check-label">com</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" name="extension" id="cpi" class="form-check-input" value="cpi"/><label for="cpi" class="form-check-label">cpi</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" name="extension" id="exe" class="form-check-input" value="exc"/><label for="exe" class="form-check-label">exe</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" name="extension" id="scr" class="form-check-input" value="scr"/><label for="scr" class="form-check-label">scr</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" name="extension" id="js" class="form-check-input" value="js"/><label for="js" class="form-check-label">js</label>
                </div>
                <div>
                    <input type="text" placeholder="확장자를 입력해 주세요." id="custom-extension" class="form-control"/>
                </div>
                <div>
                    <div class="container-fluid" id="custom-extensions"></div>
                </div>
                <div class="input-group">
                    <input type="file" class="form-control" placeholder="파일을 선택해 주세요" id="inputFile"/>
                    <button type="button" class="input-group-append btn btn-primary">SEND</button>
                </div>
            </div>

            <h2 class="mt-5">Skills</h2>
            <h5>Title description, Sep 2, 2020</h5>
            <div class="fakeimg">Fake Image</div>
            <p>Some text..</p>
            <p>Sunt in culpa qui officia deserunt mollit anim id est laborum consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco.</p>
        </div>
    </div>
</div>

<div class="mt-5 p-4 bg-dark text-white text-center">
    <p>감사합니다.</p>
</div>
</body>
<script>
    const bat = document.getElementById('bat');
    const cmd = document.getElementById('cmd');
    const com = document.getElementById('com');
    const cpi = document.getElementById('cpi');
    const exe = document.getElementById('exe');
    const scr = document.getElementById('scr');
    const js = document.getElementById('js');
    fetch('http://localhost:8080/api/extension',{method: 'GET'}).then(res => res.json()).then(data => {
        if(data.msg){
            alert(data.msg);
            return;
        }
        let extensions = data.list;
        for (let i = 0; i < extensions.length; i++){
            let extension = extensions[i];
            if(extension == 'bat'){
                bat.checked = true;
                continue;
            }
            if(extension == 'cmd'){
                cmd.checked = true;
                continue;
            }
            if(extension == 'com'){
                com.checked = true;
                continue;
            }
            if(extension == 'cpi'){
                cpi.checked = true;
            }
            if(extension == 'exe'){
                exe.checked = true;
                continue;
            }
            if(extension == 'scr'){
                scr.checked = true;
                continue;
            }
            if(extension == js){
                js.checked = true;
                continue;
            }
            let s = document.getElementById('custom-extensions').innerHTML;
            const v = extension;
            s += `<div><button id="custom-${v}" class="btn btn-outline-danger btn-sm">${v}</button></div><div class="extension-block"></div>`;
            document.getElementById('custom-extensions').innerHTML = s;
        }
    });
    let file = null;
    let ta = document.getElementById("storedFile");
    document.getElementById('inputFile').addEventListener('change', e => {
        if(e.target.files[0]) {
            file = e.target.files[0];
        }
    });
    let custom_ta = document.getElementById('custom-extensions');
    document.getElementById("custom-extension").addEventListener('change', e => {
        let v = document.getElementById('custom-extension').value
        if(v){

        }
        let s = document.getElementById('custom-extensions').innerHTML;
        s += `<div><button id="custom-${v}" class="btn btn-outline-danger btn-sm">${v}</button></div><div class="extension-block"></div>`;
        custom_ta.innerHTML = s;
        document.getElementById('custom-extension').value = '';

    });
</script>
</html>
